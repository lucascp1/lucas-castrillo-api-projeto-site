<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="shortcut icon" href="logo/shortcut_icon.svg" type="image/x-icon">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <title>Graficos | Fresh Dragon Fruits</title>
    <style>
		canvas {
			-moz-user-select: none;
			-webkit-user-select: none;
			-ms-user-select: none;
		}
	</style>
</head>
<body style="background:#141327;">
    <!-- Header Usuário -->
<header class="header">
    <div class="header-search">
        <i class="bi bi-search icon-search"></i>
        <input class="input-search" type="text" placeholder="Procurar">
    </div>
    <div class="header-user">
        <div class="user-notifications">
            <span class="notifications">3</span>
            <i class="bi bi-bell"></i>
        </div>
        <figure class="user-icon">            
            <img src="imgs/person_dashboard.png" alt="Foto de Perfil">
        </figure>
        <div class="user-options">
            <i class="bi bi-chevron-down"></i>
        </div>
    </div>
</header>
<!-- Menu Lateral -->
<section class="navbar-vertical">
    <!-- Logo Menu -->
    <div class="navbar-logo">
        <img src="logo/dark_logo.svg" alt="Logotipo Dragon Fruit">
    </div>
    <!-- Nav -->
    <nav class="nav-vertical">
        <ul>
            <a href="dashboard.html" class="nav-link">
                <i class="bi bi-speedometer2 nav-links-icon"></i>
                <span class="nav-links-name">Painel</span>
            </a>
            <a href="grafico.html" class="nav-link active">
                <i class="bi bi-bar-chart-line nav-links-icon"></i>
                <span class="nav-links-name active-span">Gráficos</span>
            </a>
            <a href="registros.html" class="nav-link">
                <i class="bi bi-clipboard-data nav-links-icon"></i>
                <span class="nav-links-name">Registros</span>
            </a>
        </ul>
        <a href="login.html" class="nav-link">
            <i class="bi bi-box-arrow-left"></i>
            <span class="nav-links-name">Encerrar</span>
        </a>
    </nav>
</section>
<!-- Conteúdo Dashboard -->
<section class="container-dashboard">
    <section class="container-graphic">
        <!-- Titulo e Descrição Gráfico -->
        <h2 class="dashboard-title">Gráficos</h2>
        <article>
            <h1>Comparação das Plantações</h1>
            <p>Comparação entre o desempenho das plantações</p>
        </article>
        <!-- Select Plantação 1 -->
        <section class="container-select">
            <select id="select_plantacoes1" onchange="onchange_select_plantacoes1()">
                <option value="" hidden>Escolha uma fazenda</option>
                <option value="plantacao1">Plantação 1</option>
                <option value="plantacao2">Plantação 2</option>
                <option value="plantacao3">Plantação 3</option>
            </select>
        <!-- Select Plantação 2 -->
            <select id="select_plantacoes2" onchange="onchange_select_plantacoes2()">
                <option value="" hidden>Escolha uma fazenda</option>
                <option value="plantacao1">Plantação 1</option>
                <option value="plantacao2">Plantação 2</option>
                <option value="plantacao3">Plantação 3</option>
            </select>
        </section>
        <!-- Gráfico de Comparação -->
        <canvas id="chart"></canvas>    
        <!-- Gráficos -->
        <section class="container-charts">
            <section class="content-charts">   
                <article>
                    <h1>Quantidade de Pés de Pitaia</h1>
                    <p>Quantidade de Pés de Pitaia por plantação</p>
                </article>
                <div class="pie-chart">
                    <canvas id="chart1"></canvas>
                </div>
            </section>
            <section class="content-charts">
                <article>
                    <h1>Faturamento de cada plantação</h1>
                    <p>Faturamento total das plantações de Pitaia</p>
                </article>
                <div class="doughnut-chart">
                    <canvas id="chart2"></canvas>
                </div>
            </section>
            <section class="content-charts">
                <article>
                    <h1>Participação por região</h1>
                    <p>Toneladas por hectare produzidas nas regiões do Brasil durante a safra</p>
                </article>
                <div class="polar-chart">
                    <canvas id="chart3"></canvas>
                </div>
            </section>
        </section>
        </section>
    </section>
</section>
</body>
</html>

<script>
// Barra de Pesquisa
function search(){
    ipt_search = input_search.value;
    if(ipt_search.length >=1){
        alert_search.innerHTML = `Função indisponível no momento.`;
        alert_search.style.display = 'block';
    } else{
        alert_search.style.display = 'none';
    }
}
// Notificações Usuário
function notification(){
    alert_notification.style.display = 'flex';
}
// Opções Usuário
function notification(){
    alert_notification.style.display = 'flex';
}
// Opções Usuário
function options(){
    alert_notification.style.display = 'flex';
}
// Fechar Alerta
function close_notification(){
    alert_notification.style.display = 'none';
}

// ChartJS
// Comparação de Plantações
// Select Coluna 0
function onchange_select_plantacoes1(){
        var plantacao1 = select_plantacoes1.value;

        if(plantacao1 == "plantacao1"){
            myChart.data.datasets[0].label = 'Plantação 1';
            myChart.data.datasets[0].data = [10, 12, 10, 14, 8, 10, 10, 12];
            myChart.update();
        }
        if(plantacao1 == "plantacao2"){
            myChart.data.datasets[0].label = 'Plantação 2';
            myChart.data.datasets[0].data = [15, 16, 12, 17, 12, 12, 11, 15];
            myChart.update();
        }
        if(plantacao1 == "plantacao3"){
            myChart.data.datasets[0].label = 'Plantação 3';
            myChart.data.datasets[0].data = [9, 10, 11, 15, 10, 11, 9, 13];
            myChart.update();
        }
}
// Select 1
function onchange_select_plantacoes2(){
        var plantacao2 = select_plantacoes2.value;

        if(plantacao2 == "plantacao1"){
            myChart.data.datasets[1].label = 'Plantação 1';
            myChart.data.datasets[1].data = [10, 12, 10, 14, 8, 10, 10, 12];
            myChart.update();
        }
        if(plantacao2 == "plantacao2"){
            myChart.data.datasets[1].label = 'Plantação 2';
            myChart.data.datasets[1].data = [15, 16, 12, 17, 12, 12, 11, 15];
            myChart.update();
        }
        if(plantacao2 == "plantacao3"){
            myChart.data.datasets[1].label = 'Plantação 3';
            myChart.data.datasets[1].data = [9, 10, 11, 15, 10, 11, 9, 13];
            myChart.update();
        }
}
// Configurações ChartsJS
var context = document.getElementById('chart').getContext('2d');
    context.canvas.width = 1000; // Largura do grafico
	context.canvas.height = 300; // Altura do grafico

    var myChart = new Chart(context, {
        type: 'bar',
        data: {
            labels: ['Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'],
            datasets: [{
                label: 'Escolha uma Plantação',
                data: 0,
                backgroundColor: [
                    '#DD1964',
                    '#DD1964',
                    '#DD1964',
                    '#DD1964',
                    '#DD1964',
                    '#DD1964',
                    '#DD1964',
                    '#DD1964'
                ],
                borderColor: [
                    '#DD1964',
                    '#DD1964',
                    '#DD1964',
                    '#DD1964',
                    '#DD1964',
                    '#DD1964',
                    '#DD1964',
                    '#DD1964'
                ],
                borderWidth: 1
            },{
                label: 'Escolha uma Plantação',
                data: 0,
                backgroundColor: [
                    '#FFDFD3',
                    '#FFDFD3',
                    '#FFDFD3',
                    '#FFDFD3',
                    '#FFDFD3',
                    '#FFDFD3',
                    '#FFDFD3',
                    '#FFDFD3'
                ],
                borderColor: [
                    '#FFDFD3',
                    '#FFDFD3',
                    '#FFDFD3',
                    '#FFDFD3',
                    '#FFDFD3',
                    '#FFDFD3',
                    '#FFDFD3',
                    '#FFDFD3'
                ],
                borderWidth: 1
            }
        ]
        },
            options: {
                scales: {
                    x: {
                    },
                    y: [{
                        scaleLabel: {
					        	display: true,
						        labelString: 'Toneladas'
                        },
                    }]
                }
            }
    }); 

    var context = document.getElementById('chart1').getContext('2d');

 /*PIE CHART*/

    var config = {
        type: 'pie',
        data: {
            labels: [
                'Plantação 1',
                'Plantação 2',
                'Plantação 3'
            ],
            datasets: [{
            label: 'My First Dataset',
            data: [248, 235, 150],
            backgroundColor: [
                '#DD1964',
                '#FFEDDF',
                '#FF6347'
            ],
            borderColor:[
                'rgb(255,250,250)',
                'rgb(255,250,250)',
                'rgb(255,250,250)'
            ],
            borderWidth: 1,
            hoverOffset: 3
  }]
}
};

    var pie = new Chart(context, config); // Puxar a função chart do script 

 /*DOUGHNUT CHART*/

var context2 = document.getElementById('chart2').getContext("2d");

var config2 = {
  type: "doughnut", // Tipo do gráfico
  data: {
    labels: ["Plantação 1", "Plantação 2", "Plantação 3"], //legendas
    datasets: [
      {
        data: [30, 25, 15], // Dados do gráfico
        backgroundColor: [ // Cor de fundo dos dados
          "#DD1964",
          "#FFEDDF",
          "#FF6347"
        ],
        borderColor: [ // Cor da borda
          "#ffffff",
        ],
        borderWidth: 1.5, // Largura da borda
      },
    ],
  },
};

var doughnut = new Chart(context2, config2); // Puxar a função chart do script


/*POLAR CHART*/
    var context3 = document.getElementById('chart3').getContext('2d');

    var config3 = {
        type: 'polarArea',
        data: {
            labels: [
                'Nordeste',
                'Centro-Oeste',
                'Norte',
                'Sul',
                'Sudeste'
        ],
        datasets: [{
            label: 'My First Dataset',
            data: [0.61, 0.83, 10.52, 33.62, 54.42],
            backgroundColor: [
                '#DD1964',
                '#FFEDDF',
                '#FF6347',
                '#908FA2',
                'rgb(54, 162, 235)'
            ]
        }]
    }
};

var polarchart = new Chart(context3, config3); // Puxar a função chart do script

</script>